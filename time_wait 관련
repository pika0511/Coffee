TIME_WAIT의 타임아웃은 60초로 하드 코딩되어 있다. 설정할 수 없다.
다수의 TIME_WAIT이 서버 성능을 저하시킨다는 논문8은 1997년에 출판됐다. 지금은 2015년이다.
클라이언트가 서버 투 서버로 한 서버에 요청이 많을 경우 tcp_tw_reuse 옵션을 설정해 TIME_WAIT을 재사용하도록 한다. 서버는 해당 사항이 없다.
오래된 서버인 경우 클라이언트가 서버 투 서버 통신을 많이 한다면 빈 포트 스캔으로 성능 저하가 발생하므로 마찬가지로 tcp_tw_reuse 옵션을 설정한다.
tcp_tw_reuse와 SO_REUSEADDR는 서로 다른 소켓에 적용되는 옵션이다.
서버/클라이언트 모두 tcp_timestamps가 기본값인 켜져 있어야 하며, 끄면 안되고 끌 필요도 없다.
net.ipv4.tcp_fin_timeout은 90 정도로 설정한다.
FIN_WAIT1은 상대방 OS에 문제가 있는 경우다.
FIN_WAIT2는 상대방 어플리케이션에 문제가 있는 경우다.
FIN_WAIT2는 TIME_WAIT의 역할을 대행한다.
특수한 경우가 아니면 링거 옵션은 사용하지 않는다.
서버가 클라이언트를 accept() 할때 할당하는 것은 소켓이다. 포트가 아니다.
소켓의 최대 갯수는 65,535개가 아니다. 소켓은 <protocol>, <src addr>, <src port>, <dest addr>, <dest port> 5개의 값으로 유니크하게 구성되며, 서버 포트 또는 클라이언트의 IP가 추가될 경우 그 만큼의 새로운 쌍을 생성할 수 있다.
